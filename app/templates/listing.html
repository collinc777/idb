{% extends "base.html" %}
{% block content %}
    <script type="text/jsx">
        var data = [];
        class GridLayout extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    gridCards: props.data
                };
                console.log("the state is: " + this.state);
            }

            render() {
                return (
                        <div className="card-deck text-center">
                            {this.state.gridCards.map((gc) => <GridCard cardID={gc.cardID}
                                                                        cardName={gc.cardName} cardURL={gc.cardURL}/>)}
                        </div>
                );
            }
        }

        class GridCard extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    cardID: props.cardID,
                    cardName: props.cardName,
                    cardURL: props.cardURL
                }
            }

            render() {
                return (
                        <div className="card listingCard">
                            <div className="card-header">
                                <h4><a href={this.state.cardURL + '/' + this.state.cardID}>{this.state.cardName}</a>
                                </h4>
                            </div>
                            <div className="card-block">
                                <a className="btn btn-block btn-default"
                                   href={this.state.cardURL + '/' + this.state.cardID}>Details</a>
                            </div>
                        </div>
                );
            }
        }

    </script>
    <div class="text-center">
        <h1>{{ listing.title }}</h1>
        <br/>
    </div>
    <div class="card-deck">
        <div class="card text-center">
            <h3 class="card-header">Sort By</h3>
            <div class="card-block">
                <div class="dropdown">
                    <button class="btn btn-block btn-lg btn-secondary dropdown-toggle" type="button"
                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Sort By
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Name Ascending</a>
                        <a class="dropdown-item" href="#">Name Descending</a>
                        <a class="dropdown-item" href="#">ID Ascending</a>
                        <a class="dropdown-item" href="#">ID Descending</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="card text-center">
            <h3 class="card-header">Filter By</h3>
            <div class="card-block">
                <div class="dropdown">
                    <button class="btn btn-block btn-lg btn-secondary dropdown-toggle" type="button"
                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Filter By
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Name</a>
                        <a class="dropdown-item" href="#">ID</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-deck text-center" id="deck-container">
        <script type="text/jsx">
            var initialData = {{ data | tojson }};
            window.gridLayout = <GridLayout data={initialData}/>;
            ReactDOM.render(gridLayout, document.getElementById("deck-container"));
        </script>
    </div>
    <!--<table class="table">
  <thead>
    <tr>
    {% for property in listing.properties %}
      <th>{{ property[0] }}</th>
    {% endfor %}
    </tr>
  </thead>
  <tbody>
  	{% for val in listing.data %}
    <tr>
      {% for property in listing.properties %}
        {% if loop.index0 == 0 %}
      <td><a href="{{ listing.url }}/{{ val.id }}">{{ val[property[1]] }}</a></td>
        {% else %}
      <td>{{ val[property[1]] }}</td>
        {% endif %}  
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>-->
{% endblock %}